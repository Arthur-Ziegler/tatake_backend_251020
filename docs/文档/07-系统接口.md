# 系统接口 API

## 目录

- [1. API文档](#1-api文档)
- [2. 新发现的Schema和接口](#2-新发现的schema和接口)
- [3. 完整的响应示例](#3-完整的响应示例)
- [4. 请求示例和最佳实践](#4-请求示例和最佳实践)

---

## 1. API文档

**GET** `/docs`

**功能描述**: API文档接口
返回微服务所有自动生成的详细API文档信息。

**认证**: 不需要

**响应**: HTML格式的交互式API文档页面

---

## 2. 新发现的Schema和接口

基于最新的OpenAPI文档，还发现了以下额外的Schema：

### UncompleteTaskRequest/Response
用于取消任务完成的操作：

**UncompleteTaskRequest**: 空对象，不需要请求体

**UncompleteTaskResponse**:
```json
{
  "task": {},                      // 取消完成后的任务信息
  "parent_update": {} | null,      // 父任务完成度更新信息
  "message": "string"              // 操作结果描述（包含不回收奖励的提示）
}
```

### TaskListQuery
简化版本的任务列表查询Schema：

```json
{
  "page": "integer",           // 页码，从1开始，默认1
  "page_size": "integer",      // 每页大小，1-100，默认20
  "include_deleted": "boolean", // 是否包含已删除的任务，默认false
  "sort_by": "string",         // 排序字段：固定为created_at
  "sort_order": "string"       // 排序方向：固定为desc（最新在前）
}
```

### Top3SetRequest
Top3设置请求模型：

```json
{
  "date": "string",      // 日期，格式：YYYY-MM-DD
  "task_ids": ["string"] // 任务ID列表，最多3个
}
```

---

## 3. 完整的响应示例

### SuccessResponse
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "title": "完成项目文档编写",
    "status": "completed"
  }
}
```

### ErrorResponse
```json
{
  "code": 4001,
  "message": "请求参数验证失败",
  "data": {
    "field": "title",
    "error": "任务标题不能为空"
  }
}
```

---

## 4. 请求示例和最佳实践

### 创建任务完整示例
```json
{
  "title": "完成项目文档",
  "description": "编写项目的技术文档和用户手册",
  "status": "pending",
  "priority": "high",
  "tags": ["文档", "项目", "重要"],
  "due_date": "2024-12-31T23:59:59Z",
  "planned_start_time": "2024-12-20T09:00:00Z",
  "planned_end_time": "2024-12-30T18:00:00Z"
}
```

### 更新用户信息完整示例
```json
{
  "nickname": "张三",
  "avatar_url": "https://example.com/avatar.jpg",
  "bio": "这是我的个人简介",
  "gender": "male",
  "birthday": "1990-05-15",
  "theme": "dark",
  "language": "zh-CN"
}
```

### 设置Top3任务完整示例
```json
{
  "date": "2025-01-15",
  "task_ids": [
    "550e8400-e29b-41d4-a716-446655440000",
    "550e8400-e29b-41d4-a716-446655440001",
    "550e8400-e29b-41d4-a716-446655440002"
  ]
}
```

---

*文档最后更新时间: 2025-01-07*
*API服务地址: http://45.152.65.130:2025*
*基于OpenAPI 3.1.0规范*