# TaKeKe Backend 部署配置模板
# 复制此文件为 deploy.env 并修改配置

# ==================== 基础配置 ====================
PROJECT_NAME=tatake-backend
VERSION=1.0.0
ENVIRONMENT=production

# ==================== 镜像配置 ====================
IMAGE_NAME=${PROJECT_NAME}
DOCKER_PLATFORM=linux/amd64

# ==================== 服务器配置 ====================
# SSH配置别名（需在 ~/.ssh/config 中配置）
SSH_ALIAS=ycy

# 或直接使用服务器信息
SERVER_HOST=45.152.65.130
DEPLOY_USER=zale
SSH_PORT=22

# ==================== 容器配置 ====================
CONTAINER_NAME=${PROJECT_NAME}
HOST_PORT=2025
CONTAINER_PORT=8000

# ==================== 健康检查 ====================
HEALTH_CHECK_URL=http://${SERVER_HOST}:${CONTAINER_PORT}/health
HEALTH_CHECK_TIMEOUT=60
HEALTH_CHECK_INTERVAL=5
HEALTH_CHECK_RETRIES=12

# ==================== 版本管理 ====================
# 保留历史版本数量（建议2-3个）
KEEP_VERSIONS=1

# 是否自动清理旧版本
AUTO_CLEANUP=true

# ==================== 部署选项 ====================
# 启用蓝绿部署（零停机）
ENABLE_BLUE_GREEN=false

# 启用自动回滚
ENABLE_ROLLBACK=true

# 部署前备份
ENABLE_BACKUP=true

# ==================== 资源限制 ====================
# 内存限制（如: 2g）
MEMORY_LIMIT=2g

# CPU限制（如: 2）
CPU_LIMIT=2

# ==================== 日志配置 ====================
# 日志驱动（json-file, syslog, none）
LOG_DRIVER=json-file

# 日志文件最大大小
LOG_MAX_SIZE=10m

# 日志文件最大数量
LOG_MAX_FILE=3

# ==================== 环境变量文件 ====================
# 容器环境变量文件路径（相对项目根目录）
ENV_FILE=.env