INFO:     Will watch for changes in these directories: ['/Users/zalelee/Code/tatake_backend']
INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
INFO:     Started reloader process [41784] using WatchFiles
INFO:     Started server process [41792]
INFO:     Waiting for application startup.
🚀 TaKeKe API v1.0.0 正在启动...
📝 环境: 开发
🌐 API服务地址: http://0.0.0.0:8001
✅ 简化认证数据库表创建成功（auth + auth_audit_logs）
✅ 认证数据库初始化完成
2025-10-25 01:08:27,516 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:27,516 INFO sqlalchemy.engine.Engine SELECT 1
2025-10-25 01:08:27,516 INFO sqlalchemy.engine.Engine [generated in 0.00008s] ()
2025-10-25 01:08:27,516 INFO sqlalchemy.engine.Engine ROLLBACK
2025-10-25 01:08:27,516 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("auth")
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("auth_audit_logs")
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("points_transactions")
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("rewards")
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("reward_recipes")
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("reward_transactions")
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("task_top3")
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("focus_sessions")
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine COMMIT
✅ 任务数据库初始化完成
2025-10-25 01:08:27,517 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:27,520 INFO sqlalchemy.engine.Engine SELECT rewards.id, rewards.name, rewards.description, rewards.points_value, rewards.image_url, rewards.cost_type, rewards.cost_value, rewards.stock_quantity, rewards.category, rewards.is_active, rewards.created_at, rewards.updated_at 
FROM rewards 
WHERE rewards.name = ?
2025-10-25 01:08:27,520 INFO sqlalchemy.engine.Engine [generated in 0.00004s] ('小金币',)
2025-10-25 01:08:27,520 INFO sqlalchemy.engine.Engine SELECT rewards.id, rewards.name, rewards.description, rewards.points_value, rewards.image_url, rewards.cost_type, rewards.cost_value, rewards.stock_quantity, rewards.category, rewards.is_active, rewards.created_at, rewards.updated_at 
FROM rewards 
WHERE rewards.name = ?
2025-10-25 01:08:27,520 INFO sqlalchemy.engine.Engine [cached since 0.0003153s ago] ('钻石',)
2025-10-25 01:08:27,520 INFO sqlalchemy.engine.Engine SELECT reward_recipes.id, reward_recipes.name, reward_recipes.result_reward_id, reward_recipes.materials, reward_recipes.is_active, reward_recipes.created_at, reward_recipes.updated_at 
FROM reward_recipes 
WHERE reward_recipes.name = ?
2025-10-25 01:08:27,520 INFO sqlalchemy.engine.Engine [generated in 0.00003s] ('小金币合成钻石',)
2025-10-25 01:08:27,520 INFO sqlalchemy.engine.Engine COMMIT
✅ 奖励数据库初始化完成
✅ 聊天数据库初始化完成
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("auth")
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("auth_audit_logs")
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("points_transactions")
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("rewards")
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("reward_recipes")
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("reward_transactions")
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("task_top3")
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("focus_sessions")
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:27,521 INFO sqlalchemy.engine.Engine COMMIT
INFO:     Application startup complete.
✅ Focus数据库初始化完成
✅ API服务启动完成
INFO:     127.0.0.1:52684 - "POST /auth/register HTTP/1.1" 200 OK
2025-10-25 01:08:34,275 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:34,276 INFO sqlalchemy.engine.Engine INSERT INTO tasks (id, created_at, updated_at, user_id, title, description, parent_id, status, priority, is_deleted, completion_percentage, last_claimed_date, tags, service_ids, due_date, planned_start_time, planned_end_time) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-10-25 01:08:34,276 INFO sqlalchemy.engine.Engine [generated in 0.00009s] ('878da885-50f1-458b-9cab-50d467450c06', '2025-10-24 17:08:34.275514', '2025-10-24 17:08:34.275515', '939a5100-d010-457b-b731-f0bab6fea9a5', '缓存诊断任务', '用于诊断任务缓存问题', None, 'pending', 'high', 0, 0.0, None, '[]', '[]', None, None, None)
2025-10-25 01:08:34,277 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.created_at, tasks.updated_at, tasks.user_id, tasks.title, tasks.description, tasks.parent_id, tasks.status, tasks.priority, tasks.is_deleted, tasks.completion_percentage, tasks.last_claimed_date, tasks.tags, tasks.service_ids, tasks.due_date, tasks.planned_start_time, tasks.planned_end_time 
FROM tasks 
WHERE tasks.id = ?
2025-10-25 01:08:34,277 INFO sqlalchemy.engine.Engine [generated in 0.00004s] ('878da885-50f1-458b-9cab-50d467450c06',)
2025-10-25 01:08:34,277 INFO sqlalchemy.engine.Engine COMMIT
2025-10-25 01:08:34,278 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:34,278 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at, tasks.user_id AS tasks_user_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.parent_id AS tasks_parent_id, tasks.status AS tasks_status, tasks.priority AS tasks_priority, tasks.is_deleted AS tasks_is_deleted, tasks.completion_percentage AS tasks_completion_percentage, tasks.last_claimed_date AS tasks_last_claimed_date, tasks.tags AS tasks_tags, tasks.service_ids AS tasks_service_ids, tasks.due_date AS tasks_due_date, tasks.planned_start_time AS tasks_planned_start_time, tasks.planned_end_time AS tasks_planned_end_time 
FROM tasks 
WHERE tasks.id = ?
2025-10-25 01:08:34,278 INFO sqlalchemy.engine.Engine [generated in 0.00003s] ('878da885-50f1-458b-9cab-50d467450c06',)
INFO:     127.0.0.1:52688 - "POST /tasks/ HTTP/1.1" 200 OK
2025-10-25 01:08:34,278 INFO sqlalchemy.engine.Engine ROLLBACK
2025-10-25 01:08:34,280 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:34,280 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.created_at, tasks.updated_at, tasks.user_id, tasks.title, tasks.description, tasks.parent_id, tasks.status, tasks.priority, tasks.is_deleted, tasks.completion_percentage, tasks.last_claimed_date, tasks.tags, tasks.service_ids, tasks.due_date, tasks.planned_start_time, tasks.planned_end_time 
FROM tasks 
WHERE tasks.id = ? AND tasks.user_id = ? AND tasks.is_deleted = 0
2025-10-25 01:08:34,280 INFO sqlalchemy.engine.Engine [generated in 0.00005s] ('878da885-50f1-458b-9cab-50d467450c06', '939a5100-d010-457b-b731-f0bab6fea9a5')
INFO:     127.0.0.1:52692 - "GET /tasks/878da885-50f1-458b-9cab-50d467450c06 HTTP/1.1" 200 OK
2025-10-25 01:08:34,281 INFO sqlalchemy.engine.Engine ROLLBACK
2025-10-25 01:08:34,282 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:34,283 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.created_at, tasks.updated_at, tasks.user_id, tasks.title, tasks.description, tasks.parent_id, tasks.status, tasks.priority, tasks.is_deleted, tasks.completion_percentage, tasks.last_claimed_date, tasks.tags, tasks.service_ids, tasks.due_date, tasks.planned_start_time, tasks.planned_end_time 
FROM tasks 
WHERE tasks.id = ? AND tasks.user_id = ? AND tasks.is_deleted = 0
2025-10-25 01:08:34,283 INFO sqlalchemy.engine.Engine [cached since 0.002267s ago] ('878da885-50f1-458b-9cab-50d467450c06', '939a5100-d010-457b-b731-f0bab6fea9a5')
2025-10-25 01:08:34,283 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.created_at, tasks.updated_at, tasks.user_id, tasks.title, tasks.description, tasks.parent_id, tasks.status, tasks.priority, tasks.is_deleted, tasks.completion_percentage, tasks.last_claimed_date, tasks.tags, tasks.service_ids, tasks.due_date, tasks.planned_start_time, tasks.planned_end_time 
FROM tasks 
WHERE tasks.id = ? AND tasks.user_id = ? AND tasks.is_deleted = 0
2025-10-25 01:08:34,283 INFO sqlalchemy.engine.Engine [cached since 0.002469s ago] ('878da885-50f1-458b-9cab-50d467450c06', '939a5100-d010-457b-b731-f0bab6fea9a5')
2025-10-25 01:08:34,283 INFO sqlalchemy.engine.Engine UPDATE tasks SET updated_at=?, title=?, description=?, status=? WHERE tasks.id = ? AND tasks.user_id = ? AND tasks.is_deleted = 0 RETURNING id, created_at, updated_at, user_id, title, description, parent_id, status, priority, is_deleted, completion_percentage, last_claimed_date, tags, service_ids, due_date, planned_start_time, planned_end_time
2025-10-25 01:08:34,283 INFO sqlalchemy.engine.Engine [generated in 0.00005s] ('2025-10-24 17:08:34.283307', '缓存诊断任务-已更新', '任务已被更新', 'in_progress', '878da885-50f1-458b-9cab-50d467450c06', '939a5100-d010-457b-b731-f0bab6fea9a5')
2025-10-25 01:08:34,284 INFO sqlalchemy.engine.Engine COMMIT
2025-10-25 01:08:34,284 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:34,284 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at, tasks.user_id AS tasks_user_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.parent_id AS tasks_parent_id, tasks.status AS tasks_status, tasks.priority AS tasks_priority, tasks.is_deleted AS tasks_is_deleted, tasks.completion_percentage AS tasks_completion_percentage, tasks.last_claimed_date AS tasks_last_claimed_date, tasks.tags AS tasks_tags, tasks.service_ids AS tasks_service_ids, tasks.due_date AS tasks_due_date, tasks.planned_start_time AS tasks_planned_start_time, tasks.planned_end_time AS tasks_planned_end_time 
FROM tasks 
WHERE tasks.id = ?
2025-10-25 01:08:34,284 INFO sqlalchemy.engine.Engine [cached since 0.006385s ago] ('878da885-50f1-458b-9cab-50d467450c06',)
/Users/zalelee/Code/tatake_backend/.venv/lib/python3.12/site-packages/pydantic/main.py:464: UserWarning: Pydantic serializer warnings:
  PydanticSerializationUnexpectedValue(Expected `str` - serialized value may not be as expected [field_name='id', input_value=UUID('878da885-50f1-458b-9cab-50d467450c06'), input_type=UUID])
  PydanticSerializationUnexpectedValue(Expected `str` - serialized value may not be as expected [field_name='user_id', input_value=UUID('939a5100-d010-457b-b731-f0bab6fea9a5'), input_type=UUID])
  return self.__pydantic_serializer__.to_python(
INFO:     127.0.0.1:52694 - "PUT /tasks/878da885-50f1-458b-9cab-50d467450c06 HTTP/1.1" 200 OK
2025-10-25 01:08:34,286 INFO sqlalchemy.engine.Engine ROLLBACK
2025-10-25 01:08:34,287 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:34,287 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.created_at, tasks.updated_at, tasks.user_id, tasks.title, tasks.description, tasks.parent_id, tasks.status, tasks.priority, tasks.is_deleted, tasks.completion_percentage, tasks.last_claimed_date, tasks.tags, tasks.service_ids, tasks.due_date, tasks.planned_start_time, tasks.planned_end_time 
FROM tasks 
WHERE tasks.id = ? AND tasks.user_id = ? AND tasks.is_deleted = 0
2025-10-25 01:08:34,287 INFO sqlalchemy.engine.Engine [cached since 0.006779s ago] ('878da885-50f1-458b-9cab-50d467450c06', '939a5100-d010-457b-b731-f0bab6fea9a5')
INFO:     127.0.0.1:52696 - "GET /tasks/878da885-50f1-458b-9cab-50d467450c06 HTTP/1.1" 200 OK
2025-10-25 01:08:34,287 INFO sqlalchemy.engine.Engine ROLLBACK
2025-10-25 01:08:34,288 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:34,288 INFO sqlalchemy.engine.Engine 
                SELECT
                    id, user_id, title, description, status, priority, parent_id,
                    tags, service_ids, due_date, planned_start_time, planned_end_time,
                    last_claimed_date, completion_percentage, is_deleted,
                    created_at, updated_at
                FROM tasks
                WHERE user_id = ?
                ORDER BY created_at DESC
                LIMIT ? OFFSET ?
            
2025-10-25 01:08:34,288 INFO sqlalchemy.engine.Engine [generated in 0.00004s] ('939a5100-d010-457b-b731-f0bab6fea9a5', 20, 0)
2025-10-25 01:08:34,289 INFO sqlalchemy.engine.Engine 
                SELECT
                    id, user_id, title, description, status, priority, parent_id,
                    tags, service_ids, due_date, planned_start_time, planned_end_time,
                    last_claimed_date, completion_percentage, is_deleted,
                    created_at, updated_at
                FROM tasks
                WHERE user_id = ?
                ORDER BY created_at DESC
                LIMIT ? OFFSET ?
            
2025-10-25 01:08:34,289 INFO sqlalchemy.engine.Engine [cached since 0.0002386s ago] ('939a5100-d010-457b-b731-f0bab6fea9a5', 100, 0)
INFO:     127.0.0.1:52698 - "GET /tasks/ HTTP/1.1" 200 OK
2025-10-25 01:08:34,289 INFO sqlalchemy.engine.Engine ROLLBACK
WARNING:  WatchFiles detected changes in 'src/domains/task/completion_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [41792]
INFO:     Started server process [41926]
INFO:     Waiting for application startup.
🚀 TaKeKe API v1.0.0 正在启动...
📝 环境: 开发
🌐 API服务地址: http://0.0.0.0:8001
✅ 简化认证数据库表创建成功（auth + auth_audit_logs）
✅ 认证数据库初始化完成
2025-10-25 01:08:51,800 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:51,800 INFO sqlalchemy.engine.Engine SELECT 1
2025-10-25 01:08:51,800 INFO sqlalchemy.engine.Engine [generated in 0.00006s] ()
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine ROLLBACK
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("auth")
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("auth_audit_logs")
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("points_transactions")
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("rewards")
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("reward_recipes")
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("reward_transactions")
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("task_top3")
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("focus_sessions")
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,801 INFO sqlalchemy.engine.Engine COMMIT
✅ 任务数据库初始化完成
2025-10-25 01:08:51,802 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:51,804 INFO sqlalchemy.engine.Engine SELECT rewards.id, rewards.name, rewards.description, rewards.points_value, rewards.image_url, rewards.cost_type, rewards.cost_value, rewards.stock_quantity, rewards.category, rewards.is_active, rewards.created_at, rewards.updated_at 
FROM rewards 
WHERE rewards.name = ?
2025-10-25 01:08:51,804 INFO sqlalchemy.engine.Engine [generated in 0.00004s] ('小金币',)
2025-10-25 01:08:51,804 INFO sqlalchemy.engine.Engine SELECT rewards.id, rewards.name, rewards.description, rewards.points_value, rewards.image_url, rewards.cost_type, rewards.cost_value, rewards.stock_quantity, rewards.category, rewards.is_active, rewards.created_at, rewards.updated_at 
FROM rewards 
WHERE rewards.name = ?
2025-10-25 01:08:51,804 INFO sqlalchemy.engine.Engine [cached since 0.000325s ago] ('钻石',)
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine SELECT reward_recipes.id, reward_recipes.name, reward_recipes.result_reward_id, reward_recipes.materials, reward_recipes.is_active, reward_recipes.created_at, reward_recipes.updated_at 
FROM reward_recipes 
WHERE reward_recipes.name = ?
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine [generated in 0.00003s] ('小金币合成钻石',)
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine COMMIT
✅ 奖励数据库初始化完成
✅ 聊天数据库初始化完成
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("auth")
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("auth_audit_logs")
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("points_transactions")
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("rewards")
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("reward_recipes")
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("reward_transactions")
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("task_top3")
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("focus_sessions")
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:08:51,805 INFO sqlalchemy.engine.Engine COMMIT
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'src/domains/task/service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [41926]
INFO:     Started server process [41985]
INFO:     Waiting for application startup.
🚀 TaKeKe API v1.0.0 正在启动...
📝 环境: 开发
🌐 API服务地址: http://0.0.0.0:8001
✅ 简化认证数据库表创建成功（auth + auth_audit_logs）
✅ 认证数据库初始化完成
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine SELECT 1
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine [generated in 0.00006s] ()
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine ROLLBACK
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("auth")
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("auth_audit_logs")
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("points_transactions")
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("rewards")
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("reward_recipes")
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("reward_transactions")
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("task_top3")
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("focus_sessions")
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,631 INFO sqlalchemy.engine.Engine COMMIT
✅ 任务数据库初始化完成
2025-10-25 01:09:01,632 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:09:01,634 INFO sqlalchemy.engine.Engine SELECT rewards.id, rewards.name, rewards.description, rewards.points_value, rewards.image_url, rewards.cost_type, rewards.cost_value, rewards.stock_quantity, rewards.category, rewards.is_active, rewards.created_at, rewards.updated_at 
FROM rewards 
WHERE rewards.name = ?
2025-10-25 01:09:01,634 INFO sqlalchemy.engine.Engine [generated in 0.00004s] ('小金币',)
2025-10-25 01:09:01,634 INFO sqlalchemy.engine.Engine SELECT rewards.id, rewards.name, rewards.description, rewards.points_value, rewards.image_url, rewards.cost_type, rewards.cost_value, rewards.stock_quantity, rewards.category, rewards.is_active, rewards.created_at, rewards.updated_at 
FROM rewards 
WHERE rewards.name = ?
2025-10-25 01:09:01,634 INFO sqlalchemy.engine.Engine [cached since 0.0003265s ago] ('钻石',)
2025-10-25 01:09:01,635 INFO sqlalchemy.engine.Engine SELECT reward_recipes.id, reward_recipes.name, reward_recipes.result_reward_id, reward_recipes.materials, reward_recipes.is_active, reward_recipes.created_at, reward_recipes.updated_at 
FROM reward_recipes 
WHERE reward_recipes.name = ?
2025-10-25 01:09:01,635 INFO sqlalchemy.engine.Engine [generated in 0.00005s] ('小金币合成钻石',)
2025-10-25 01:09:01,635 INFO sqlalchemy.engine.Engine COMMIT
✅ 奖励数据库初始化完成
✅ 聊天数据库初始化完成
2025-10-25 01:09:01,635 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-25 01:09:01,635 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("auth")
2025-10-25 01:09:01,635 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,635 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("auth_audit_logs")
2025-10-25 01:09:01,635 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("points_transactions")
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("rewards")
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("reward_recipes")
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("reward_transactions")
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("task_top3")
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("focus_sessions")
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-25 01:09:01,636 INFO sqlalchemy.engine.Engine COMMIT
INFO:     Application startup complete.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [41985]
INFO:     Stopping reloader process [41784]
