# Proposal: Streamlit 测试面板任务流程

## 目的
实现任务管理、Top3 管理和番茄钟系统页面，覆盖完整的任务生命周期测试流程。

## Why
任务流程是测试面板的核心功能，涉及任务创建→设置Top3→开始专注→完成任务的完整链路。通过实现这三个紧密关联的页面，可以：验证任务树形结构和父子关系、测试 Top3 任务设置和积分消耗、验证番茄钟状态流转和任务关联、测试任务完成后的积分和材料奖励。这些功能相互依赖，集中实现可确保数据关联性测试的完整性。

## What Changes

### 包含功能
1. **任务管理页面**：
   - 树形视图（子任务缩进显示）
   - 行内操作按钮（完成/删除）
   - 快速创建测试任务
   - 完整表单创建（含高级选项）
   - 展开查看完整 JSON

2. **Top3 管理页面**：
   - 设置每日 Top3（多选任务）
   - 查看指定日期 Top3
   - 显示积分消耗

3. **番茄钟系统页面**：
   - 实时显示当前专注会话
   - 开始/暂停/恢复/完成操作按钮
   - 会话状态自动更新
   - 历史专注记录

### 不包含
- 聊天、奖励、积分、用户管理页面（在提案 2.2 中实现）

## 影响

### 受益方
- **开发者**：快速测试任务完整生命周期
- **依赖关系**：必须在提案 1 完成后才能开始

## 依赖关系
- **前置依赖**：提案 1（基础架构）必须先完成
- **并行提案**：可与提案 2.2 完全并行开发

## 关联规格
- `streamlit-task-flow`：任务流程核心规格

## 验收标准
1. ✅ 任务树形视图正确显示父子关系（子任务缩进）
2. ✅ 行内操作按钮（完成/删除）功能正常
3. ✅ 设置 Top3 成功并显示积分消耗
4. ✅ 番茄钟会话状态流转正确（开始→暂停→恢复→完成）
5. ✅ 测试完整流程：创建任务→设置Top3→开始专注→完成任务
