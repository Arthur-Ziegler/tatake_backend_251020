# Proposal: 构建 Streamlit API 测试面板

## 目的
构建数据驱动的 Streamlit 测试面板，覆盖全部 38 个 API 端点，消除 SwaggerUI 中的手动参数复制粘贴痛点，实现快速测试 API 之间的数据关联性。

## Why
SwaggerUI 测试 API 存在严重效率问题：每次测试需手动复制粘贴 ID（task_id、session_id 等），无法可视化 API 数据关联性（任务→Top3→专注→完成→积分→奖励完整链路），且缺少数据驱动操作界面（如任务列表直接点击删除）。通过构建 Streamlit 数据驱动测试面板，可实现：列表中每行自动关联 ID 操作按钮、自动管理 JWT Token、树形/表格双视图展示，从而大幅提升测试效率和 API 关联性验证能力。

## What Changes

### 包含功能
1. **8 个业务页面**：认证、任务、聊天、番茄钟、奖励、积分、Top3、用户
2. **38 个 API 集成**：覆盖所有端点
3. **数据驱动交互**：
   - 任务管理：树形视图 + 行内操作按钮（完成/删除/编辑）
   - 聊天系统：类微信界面（会话列表 + 聊天记录 + 输入框）
   - 番茄钟：实时会话状态 + 操作按钮（暂停/恢复/完成）
   - 奖励系统：奖品目录 + 我的材料 + 一键兑换
4. **自动化管理**：
   - JWT Token 自动刷新和注入
   - API 响应数据自动缓存到 session_state
   - 依赖关系错误提示
5. **快捷功能**：
   - 预设模板（如"快速创建测试任务"）
   - 表单高级选项折叠展开
   - 完整 JSON 响应可展开查看

### 不包含
- 生产环境数据管理
- 多用户切换功能
- 数据持久化（关闭浏览器即清空）
- 美化 UI 样式

## 影响

### 受益方
- **开发者**：快速测试完整业务流程，验证 API 数据关联
- **测试团队**：无需编写代码即可进行端到端测试

### 技术影响
- 新增 Streamlit 依赖（`streamlit>=1.28.0`）
- 新增 `streamlit_app/` 目录
- 无侵入式设计，不影响现有代码

## 关联规格
- `streamlit-testing-panel`：核心功能规格

## 验收标准
1. ✅ 覆盖全部 38 个 API 端点
2. ✅ 数据驱动交互（任务列表带操作按钮，无需手动输入 ID）
3. ✅ JWT 自动管理（登录后自动注入 Token）
4. ✅ 树形任务视图 + 类微信聊天界面
5. ✅ 表格 + JSON 双视图
6. ✅ 运行 `uv run streamlit run streamlit_app/main.py` 成功启动
