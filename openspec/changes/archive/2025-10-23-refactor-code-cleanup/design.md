## Context
项目经过多轮开发，积累了大量冗余代码、重复服务和过时测试。当前代码量庞大但核心功能相对简单，需要系统性清理以提高可维护性。

## Goals / Non-Goals
- Goals: 简化项目结构，减少30-40%代码量，提升开发效率
- Non-Goals: 不改变核心业务逻辑，不影响现有API功能

## Decisions
- **Decision**: 保留v2版本service，删除旧版本
- **Reason**: v2版本基于最新DDD设计，架构更清晰
- **Alternatives**: 保持双版本(增加维护成本)或重写(风险高)

- **Decision**: 场景测试优先于单元测试
- **Reason**: 更贴近实际业务需求，测试价值更高
- **Alternatives**: 传统分层测试(测试重复)或TDD(周期长)

## Risks / Trade-offs
- **风险**: 删除代码可能影响依赖
- **缓解**: 分阶段删除，及时验证
- **权衡**: 短期清理成本 vs 长期维护收益

## Migration Plan
1. **Phase 1**: 删除明显过时文件(零风险)
2. **Phase 2**: 整合重复功能(需要测试验证)
3. **Phase 3**: 重构测试架构(确保覆盖率)
4. **Phase 4**: 代码质量清理(自动化检查)

## Open Questions
- tests/scenarios/是否需要补充更多业务场景?不需要你现在考虑
- 是否需要自动化工具防止未来代码重复?（这个可以和我讨论）