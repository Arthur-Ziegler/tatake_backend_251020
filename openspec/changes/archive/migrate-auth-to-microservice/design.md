## Context
现有认证系统基于本地SQLite数据库，功能相对简单，只支持微信OpenID认证和基础的短信验证。为了提供更丰富的认证功能并实现系统解耦，需要迁移到专用的认证微服务。微服务提供微信、邮箱、手机号三种认证方式，支持多租户架构，并提供完整的JWT令牌管理。

## Goals / Non-Goals
- Goals:
  - 实现认证系统完全微服务化
  - 支持微信、邮箱、手机号三种认证方式
  - 保持JWT本地验证能力
  - API路径与微服务完全一致
  - 自动注入project参数简化调用
- Non-Goals:
  - 不保留任何本地认证数据库
  - 不兼容旧的API路径格式
  - 不实现复杂的业务逻辑透传

## Decisions
- Decision: 采用纯HTTP透传架构，无业务逻辑
  - 理由：最简单直接的微服务集成方式，降低维护成本
  - 替代方案：实现复杂的业务逻辑适配层
- Decision: JWT本地验证通过微服务公钥接口
  - 理由：减少网络调用，提升性能
  - 替代方案：每次JWT验证都调用微服务
- Decision: 自动注入project参数为"tatake_backend"
  - 理由：简化前端调用，统一租户标识
  - 替代方案：前端传递project参数

## Risks / Trade-offs
- [Risk] 微服务不可用导致整个系统无法认证 → Mitigation: 实现缓存和降级机制
- [Trade-off] 增加网络调用延迟 vs 获得更丰富的认证功能
- [Risk] API路径变更影响前端代码 → Mitigation: 提前沟通和同步更新

## Migration Plan
1. 准备阶段：验证微服务连通性，创建客户端代码
2. 实现阶段：实现透传层和新的API路由
3. 切换阶段：更新认证中间件，切换到微服务
4. 清理阶段：删除旧代码，更新测试

## Open Questions
- 是否需要实现微服务健康检查和自动降级？
- 邮箱认证是否需要配置SMTP服务，还是使用微服务内置功能？
- 前端API路径更新的时间安排和协调方式？