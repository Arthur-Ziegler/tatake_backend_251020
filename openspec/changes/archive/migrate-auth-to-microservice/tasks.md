## 1. 实施准备工作
- [ ] 1.1 验证认证微服务连通性和可用性
- [ ] 1.2 添加微服务配置到环境变量
- [ ] 1.3 创建认证微服务HTTP客户端
- [ ] 1.4 实现JWT公钥获取和本地验证机制

## 2. 实现微服务透传层
- [ ] 2.1 创建AuthMicroserviceClient客户端类
- [ ] 2.2 实现请求体自动注入project参数
- [ ] 2.3 实现响应格式统一转换
- [ ] 2.4 实现统一的错误处理和重试机制

## 3. 重构认证API路由
- [ ] 3.1 创建新的auth router，采用微服务路径格式
- [ ] 3.2 实现微信认证相关端点（register, login, bind）
- [ ] 3.3 实现邮箱认证相关端点（send-code, register, login, bind）
- [ ] 3.4 实现手机认证相关端点（send-code, verify）
- [ ] 3.5 实现游客初始化和令牌刷新端点
- [ ] 3.6 实现系统公钥获取端点

## 4. 更新认证中间件
- [ ] 4.1 修改JWT验证中间件，使用微服务公钥验证
- [ ] 4.2 保持现有protected endpoint机制
- [ ] 4.3 处理微服务不可用时的降级策略

## 5. 清理旧代码和测试
- [ ] 5.1 删除src/domains/auth/整个目录
- [ ] 5.2 删除所有认证相关测试文件
- [ ] 5.3 删除认证数据库配置和依赖
- [ ] 5.4 清理不再使用的依赖包

## 6. 测试和验证
- [ ] 6.1 测试所有认证端点功能正常
- [ ] 6.2 测试JWT本地验证机制
- [ ] 6.3 测试邮箱认证完整流程
- [ ] 6.4 测试微信认证完整流程
- [ ] 6.5 测试手机认证完整流程
- [ ] 6.6 测试网络异常和错误处理