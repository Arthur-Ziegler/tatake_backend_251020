[tool:pytest]
# 场景测试专用pytest配置

# 测试目录
testpaths = .

# 场景测试特定选项
addopts =
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    --color=yes
    -m "scenario"

# 场景测试标记定义
markers =
    scenario: 场景测试，验证端到端业务流程
    task_flow: 任务完整流程测试（优先级A）
    top3_flow: Top3特殊奖励流程测试（优先级B）
    focus_flow: Focus番茄钟流程测试（优先级C）
    combined_flow: 跨模块组合流程测试（优先级D）

# 测试执行顺序（按优先级）
# 任务流程（A） → Top3流程（B） → Focus流程（C） → 组合流程（D）

# 环境变量检查
env =
    API_BASE_URL=http://localhost:8001
    TESTING=true

# 场景测试超时设置
timeout = 600

# 日志配置
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] SCENARIO: %(message)s
log_cli_date_format = %H:%M:%S

# 场景测试特定设置
# - 每个测试文件使用独立的测试用户
# - 测试失败时自动清理数据
# - 提供详细的测试步骤输出